version: 0.1
backend:
  phases:
    build:
      commands:
        - '# Execute Amplify CLI with the helper script'
        - '#amplifyPush --simple'
frontend:
  phases:
    preBuild:
      commands:
        - yarn install
    build:
      commands:
        - yarn run build
  artifacts:
    baseDirectory: build
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*

test:
  phases:
    preTest:
      commands:
        - npm ci
        - npm install wait-on
        - 'npm start & npx wait-on http://localhost:8080'
    test:
      commands:
        - 'npm test'
        
    # postTest:
    #   commands:
        - #npx mochawesome-merge cypress/report/mochawesome-report/mochawesome*.json > cypress/report/mochawesome.json
  # artifacts:
  #   baseDirectory: cypress
  #   configFilePath: '**/mochawesome.json'
  #   files:
  #     - '**/*.png'
  #     - '**/*.mp4'